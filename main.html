<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Simple Blog</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            margin: 0;
            padding: 20px;
            background: #fff;
            color: #333;
            transition: all 0.3s;
        }
        .dark-mode {
            background: #222;
            color: #ddd;
        }
        .header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 20px;
        }
        .controls {
            display: flex;
            gap: 10px;
        }
        .blog-list {
            max-width: 800px;
            margin: 0 auto;
        }
        .blog-preview {
            border-bottom: 1px solid #ccc;
            padding: 15px 0;
        }
        .blog-preview:last-child {
            border-bottom: none;
        }
        .blog-title {
            margin: 0;
            font-size: 1.5em;
        }
        .blog-meta {
            color: #666;
            font-size: 0.9em;
            margin: 5px 0;
        }
        .blog-excerpt {
            margin: 10px 0;
        }
        .blog-content {
            display: none;
            margin-top: 10px;
        }
        .blog-content.active {
            display: block;
        }
        .read-more {
            background: #007bff;
            color: #fff;
            border: none;
            padding: 8px 15px;
            cursor: pointer;
        }
        .read-more:hover {
            background: #0056b3;
        }
        .dark-mode .blog-preview {
            border-bottom: 1px solid #555;
        }
        .dark-mode .read-more {
            background: #3399ff;
        }
        .dark-mode .read-more:hover {
            background: #287acc;
        }
        .dark-mode .blog-meta {
            color: #aaa;
        }
        button, select {
            padding: 8px;
            cursor: pointer;
        }
    </style>
</head>
<body>
    <header class="header">
        <h1 id="site-title">My Blog</h1>
        <div class="controls">
            <select id="language-switch" onchange="switchLanguage()">
                <option value="en">English</option>
                <option value="ne">Nepali</option>
            </select>
            <button id="theme-toggle" onclick="toggleTheme()">Dark Mode</button>
        </div>
    </header>
    <div class="blog-list" id="blog-list">
        <!-- Blog previews will be dynamically inserted here -->
    </div>

    <script>
        let blogs = [];
        let currentLang = 'en';

        // Fetch blogs from JSON
        fetch('blogs.json')
            .then(response => response.json())
            .then(data => {
                blogs = data;
                renderBlogs();
            })
            .catch(error => console.error('Error loading blogs:', error));

        function renderBlogs() {
            const blogList = document.getElementById('blog-list');
            blogList.innerHTML = '';
            blogs.forEach(blog => {
                const blogDiv = document.createElement('div');
                blogDiv.className = 'blog-preview';
                blogDiv.innerHTML = `
                    <h2 class="blog-title">${blog.title[currentLang]}</h2>
                    <div class="blog-meta">
                        <span>${blog.dateCreated}</span> | 
                        <span>${blog.tags.join(', ')}</span>
                    </div>
                    <p class="blog-excerpt">${blog.excerpt[currentLang]}</p>
                    <button class="read-more" onclick="toggleContent(this)">${
                        currentLang === 'en' ? 'Read More' : 'थप पढ्नुहोस्'
                    }</button>
                    <div class="blog-content">${blog.content[currentLang]}</div>
                `;
                blogList.appendChild(blogDiv);
            });
        }

        function toggleTheme() {
            document.body.classList.toggle('dark-mode');
            const button = document.getElementById('theme-toggle');
            button.textContent = document.body.classList.contains('dark-mode') ? 'Light Mode' : 'Dark Mode';
        }

        function switchLanguage() {
            currentLang = document.getElementById('language-switch').value;
            document.documentElement.lang = currentLang;
            const siteTitle = document.getElementById('site-title');
            siteTitle.textContent = currentLang === 'en' ? 'My Blog' : 'मेरो ब्लग';
            renderBlogs(); // Re-render blogs to update language
            updateReadMoreButtons();
        }

        function toggleContent(button) {
            const content = button.nextElementSibling;
            const isActive = content.classList.contains('active');
            content.classList.toggle('active');
            button.textContent = isActive 
                ? (currentLang === 'en' ? 'Read More' : 'थप पढ्नुहोस्')
                : (currentLang === 'en' ? 'Read Less' : 'कम पढ्नुहोस्');
        }

        function updateReadMoreButtons() {
            const buttons = document.querySelectorAll('.read-more');
            buttons.forEach(button => {
                const content = button.nextElementSibling;
                button.textContent = content.classList.contains('active')
                    ? (currentLang === 'en' ? 'Read Less' : 'कम पढ्नुहोस्')
                    : (currentLang === 'en' ? 'Read More' : 'थप पढ्नुहोस्');
            });
        }

        // Initialize language
        switchLanguage();
    </script>
</body>
</html>